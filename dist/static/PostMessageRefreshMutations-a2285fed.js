import{r as s,bF as v,ab as c,j as p}from"./sanity-219ce20b.js";function f(r){const{channel:t,draft:e,published:n,livePreviewEnabled:l}=r,[i,a]=s.useState(e),[o,u]=s.useState(n);return s.useEffect(()=>{i?._rev!==e?._rev&&(s.startTransition(()=>a(e)),e&&t?.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:l,document:d(e)})),o?._rev!==n?._rev&&(s.startTransition(()=>u(n)),n&&t?.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:l,document:d(n)}))},[t,e,l,i?._rev,o?._rev,n]),null}function d(r){const{_id:t,_type:e,_rev:n,slug:l}=r;return{_id:t,_type:e,_rev:n,slug:l}}var b=s.memo(function(r){const{channel:t,type:e,previewKitConnection:n,loadersConnection:l}=r,i=s.useMemo(()=>v(r.id),[r.id]),{draft:a,published:o,ready:u}=c(i,e,"low");return u&&a||o?p.jsx(f,{channel:t,draft:a,livePreviewEnabled:n==="connected"||l==="connected",published:o},i):null});export{b as default};
